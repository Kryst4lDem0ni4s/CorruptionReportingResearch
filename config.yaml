# # ============================================================================
# # DEFAULT SYSTEM CONFIGURATION
# # corruption-reporting-prototype/config.yaml
# # ============================================================================
# #
# # This is the base configuration file that provides sensible defaults.
# # Environment-specific overrides are in:
# #   - config.dev.yaml (development)
# #   - config.prod.yaml (production)
# #
# # USAGE:
# #   The system automatically loads this config by default.
# #   Set ENV environment variable to load environment-specific config:
# #   - ENV=dev → loads config.dev.yaml (extends this file)
# #   - ENV=prod → loads config.prod.yaml (extends this file)
# #
# # ENVIRONMENT VARIABLES:
# #   Use ${VARIABLE_NAME} syntax to reference .env variables
# #   Example: database_path: "${DATA_DIR}/database.json"
# #
# # ============================================================================

# # =============================================================================
# # ENVIRONMENT SETTINGS
# # =============================================================================
# environment: default
# debug: false
# testing_mode: false

# # =============================================================================
# # SERVER CONFIGURATION
# # =============================================================================
# server:
#   host: "0.0.0.0"
#   port: 8000
#   reload: false
#   workers: 1
#   log_level: "info"
#   # access_log: true
#   # use_colors: false

#   # CORS settings
#   # cors:
#   #   enabled: true
#   #   allow_origins:
#   #     - "http://localhost:3000"
#   #     - "http://localhost:8000"
#   #   allow_credentials: true
#   #   allow_methods:
#   #     - "GET"
#   #     - "POST"
#   #     - "PUT"
#   #     - "DELETE"
#   #     - "OPTIONS"
#   #   allow_headers:
#   #     - "Content-Type"
#   #     - "Authorization"
#   #   max_age: 600

# # =============================================================================
# # API CONFIGURATION
# # =============================================================================
# api:
#   prefix: "/api/v1"
#   title: "Corruption Reporting System API"
#   description: "Anonymous Evidence Validation Framework"
#   version: "1.0.0"
#   docs_url: "/docs"
#   redoc_url: "/redoc"
#   openapi_url: "/openapi.json"

#   # Request limits
#   max_upload_size: 20971520  # 20 MB
#   timeout: 120  # 2 minutes

#   # Pagination
#   default_page_size: 20
#   max_page_size: 100

# # =============================================================================
# # STORAGE CONFIGURATION
# # =============================================================================
# storage:
#   # base_dir: "backend/data"

#   # Submission storage
#   submissions_dir: "backend/data/submissions"
#   evidence_dir: "backend/data/evidence"
#   reports_dir: "backend/data/reports"
#   cache_dir: "backend/data/cache"

#   # Database files (JSON-based)
#   # chain_file: "backend/data/chain.json"
#   # validators_file: "backend/data/validators.json"
#   # index_file: "backend/data/index.json"

#   # Retention policies
#   # submission_retention_days: 90
#   # cache_retention_hours: 24

#   # Sharding
#   # use_sharding: true
#   # shard_by_date: true

# # =============================================================================
# # MACHINE LEARNING MODELS
# # =============================================================================
# models:
#   # Model cache directory
#   # cache_dir: "~/.cache/huggingface"

#   # Device configuration
#   device: "cpu"
#   use_fp16: false

#   # CLIP model (deepfake detection)
#   clip:
#     model_name: "openai/clip-vit-base-patch32"
#     enabled: true
#     batch_size: 4
#     num_workers: 0

#   # Wav2Vec2 model (audio analysis)
#   wav2vec:
#     model_name: "facebook/wav2vec2-base"
#     enabled: true
#     batch_size: 2

#   # BLIP model (image captioning)
#   blip:
#     model_name: "Salesforce/blip-image-captioning-base"
#     enabled: true
#     max_length: 50

#   # Sentence transformer (text embeddings)
#   sentence_transformer:
#     model_name: "sentence-transformers/all-MiniLM-L6-v2"
#     enabled: true
#     batch_size: 8

#   # Test-time augmentation
#   augmentation:
#     enabled: true
#     num_variations: 10

# # =============================================================================
# # LAYER CONFIGURATIONS
# # =============================================================================

# # Layer 1: Anonymity
# layer1:
#   enabled: true
#   pseudonym_algorithm: "sha256"
#   encryption_algorithm: "fernet"  # AES-256
#   strip_metadata: true
#   hash_chain_enabled: true

# # Layer 2: Credibility Assessment
# layer2:
#   enabled: true
#   deepfake_threshold: 0.5
#   confidence_threshold: 0.4
#   ensemble_voting: true
#   cross_modal_consistency: true

#   # Detection thresholds
#   high_confidence: 0.80
#   medium_confidence: 0.60
#   low_confidence: 0.40

# # Layer 3: Coordination Detection
# layer3:
#   enabled: true
#   similarity_threshold: 0.7
#   min_cluster_size: 3
#   detection_window_hours: 48

#   # Graph analysis
#   use_louvain_clustering: true
#   use_one_class_svm: true

#   # Stylometric features
#   analyze_ttr: true
#   analyze_pos: true
#   analyze_lexical_density: true

# # Layer 4: Byzantine Consensus
# layer4:
#   enabled: true
#   num_validators: 20
#   devil_advocate_ratio: 0.1
#   consensus_threshold: 0.7
#   max_rounds: 10
#   convergence_timeout: 60

# # Layer 5: Counter-Evidence
# layer5:
#   enabled: true
#   presumption_of_innocence_weight: 1.3
#   identity_verification_bonus: 1.2
#   bayesian_update_enabled: true
#   min_impact_threshold: 0.05

# # Layer 6: Reporting
# layer6:
#   enabled: true
#   format: "pdf"
#   include_visualizations: true
#   include_chain_of_custody: true
#   include_confidence_intervals: true
#   section_45_compliant: true

#   # Report styling
#   font_family: "Helvetica"
#   page_size: "A4"
#   include_header: true
#   include_footer: true

# # =============================================================================
# # SECURITY SETTINGS
# # =============================================================================
# security:
#   # Cryptography
#   encryption_key_rotation_days: 90
#   hash_algorithm: "sha256"

#   # Rate limiting
#   rate_limit:
#     enabled: true
#     requests_per_minute: 10
#     requests_per_hour: 100
#     burst_size: 20

#   # IP restrictions
#   ip_whitelist: []
#   ip_blacklist: []

#   # Authentication
#   require_auth: false
#   token_expiry_hours: 24

# # =============================================================================
# # LOGGING CONFIGURATION
# # =============================================================================
# logging:
#   level: "INFO"
#   format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

#   # File logging
#   file:
#     enabled: true
#     path: "logs/app.log"
#     max_bytes: 10485760  # 10 MB
#     backup_count: 5
#     rotation: "size"

#   # Console logging
#   console:
#     enabled: true
#     colorize: false

#   # Structured logging
#   json_logs: false

#   # Log levels by module
#   modules:
#     uvicorn: "INFO"
#     fastapi: "INFO"
#     backend.core: "INFO"
#     backend.services: "INFO"
#     backend.models: "WARNING"
#     transformers: "ERROR"
#     torch: "ERROR"

# # =============================================================================
# # PERFORMANCE SETTINGS
# # =============================================================================
# performance:
#   # Memory limits
#   max_memory_mb: 8192
#   gc_enabled: true
#   gc_threshold: 0.9

#   # Caching
#   cache_enabled: true
#   cache_ttl_seconds: 3600
#   cache_max_size_mb: 1024

#   # Concurrency
#   max_concurrent_submissions: 10
#   background_workers: 2

#   # Optimization flags
#   lazy_loading: true
#   batch_processing: true
#   early_termination: true

# # =============================================================================
# # EVALUATION SETTINGS
# # =============================================================================
# evaluation:
#   enabled: false
#   output_dir: "evaluation/results"

#   # Dataset paths
#   datasets:
#     faceforensics_dir: "evaluation/datasets/faceforensics"
#     celebdf_dir: "evaluation/datasets/celebdf"
#     synthetic_dir: "evaluation/datasets/synthetic_attacks"

#   # Metrics
#   compute_auroc: true
#   compute_precision_recall: true
#   compute_confusion_matrix: true
#   save_visualizations: true

#   # Benchmarking
#   benchmark_enabled: false
#   benchmark_iterations: 100

# # =============================================================================
# # MONITORING & METRICS
# # =============================================================================
# monitoring:
#   enabled: true

#   # Prometheus metrics
#   prometheus:
#     enabled: true
#     port: 9090
#     endpoint: "/metrics"

#   # Health checks
#   health_check:
#     enabled: true
#     endpoint: "/health"
#     detailed: false

#   # Performance tracking
#   track_request_duration: true
#   track_model_inference_time: true
#   track_memory_usage: true
#   track_error_rates: true

# # =============================================================================
# # TESTING SETTINGS
# # =============================================================================
# testing:
#   # Test data generation
#   generate_synthetic_data: false
#   num_synthetic_submissions: 0

#   # Mock services
#   mock_ml_models: false
#   mock_external_apis: false

#   # Test fixtures
#   fixtures_dir: "tests/fixtures"
#   use_fixtures: false

# # =============================================================================
# # DEVELOPMENT TOOLS
# # =============================================================================
# dev_tools:
#   # Hot reload
#   auto_reload: false
#   watch_files: []

#   # Debugging
#   enable_profiler: false
#   enable_debugger: false

#   # API documentation
#   show_docs: true
#   show_schemas: true

#   # Development helpers
#   seed_data_on_startup: false
#   reset_db_on_startup: false
#   validate_config_on_startup: true

# # =============================================================================
# # EXTERNAL SERVICES (Optional)
# # =============================================================================
# external:
#   # Azure (optional)
#   azure:
#     enabled: false
#     storage_account: ""
#     storage_key: ""
#     container_name: "corruption-reporting"

#   # Email notifications (optional)
#   email:
#     enabled: false
#     smtp_host: ""
#     smtp_port: 587
#     from_address: ""

#   # Webhooks (optional)
#   webhooks:
#     enabled: false
#     endpoints: []

# # =============================================================================
# # FEATURE FLAGS
# # =============================================================================
# features:
#   enable_counter_evidence: true
#   enable_pdf_reports: true
#   enable_network_graphs: true
#   enable_batch_processing: true
#   enable_real_time_updates: false
#   enable_file_encryption: true
#   enable_hash_chain: true
#   enable_coordination_detection: true

# # =============================================================================
# # EXPERIMENTAL FEATURES
# # =============================================================================
# experimental:
#   # Advanced ML features
#   use_grad_cam: false
#   use_attention_maps: false

#   # Blockchain anchoring (future)
#   blockchain_anchoring: false

#   # Distributed consensus (future)
#   distributed_validators: false

# # =============================================================================
# # DISASTER RECOVERY (production deployments)
# # =============================================================================
# disaster_recovery:
#   # Backup settings
#   auto_backup: false
#   backup_interval_hours: 24
#   backup_retention_days: 30
#   backup_dir: "backups"

#   # Recovery settings
#   enable_recovery_mode: false
#   recovery_point_objective_hours: 24
#   recovery_time_objective_hours: 4

# # =============================================================================
# # COMPLIANCE
# # =============================================================================
# compliance:
#   # Data privacy
#   gdpr_compliant: true
#   anonymize_logs: true
#   data_retention_policy_days: 90

#   # Audit trail
#   enable_audit_log: true
#   audit_log_path: "logs/audit.log"

#   # Encryption
#   encrypt_at_rest: true
#   encrypt_in_transit: true

# # =============================================================================
# # ALERTS & NOTIFICATIONS
# # =============================================================================
# alerts:
#   enabled: false

#   # Alert thresholds
#   error_rate_threshold: 0.05
#   response_time_threshold_ms: 5000
#   memory_usage_threshold: 0.9

#   # Notification channels
#   channels:
#     email: false
#     slack: false
#     webhook: false

# # =============================================================================
# # END OF DEFAULT CONFIGURATION
# # =============================================================================
# #
# # NOTES:
# # - This file provides baseline defaults for all environments
# # - Override settings in config.dev.yaml or config.prod.yaml
# # - Use environment variables (${VAR}) for sensitive values
# # - Never commit secrets or credentials to version control
# #
# # INHERITANCE:
# # - config.yaml (this file) → base defaults
# # - config.dev.yaml → extends base with dev-specific settings
# # - config.prod.yaml → extends base with prod-specific settings
# #
# # VALIDATION:
# # - Configuration is validated on application startup
# # - Invalid settings will cause startup failure with clear error messages
# # - Use 'python scripts/health_check.py' to validate config
# #
# # ============================================================================


# ============================================================================
# MINIMAL WORKING CONFIG - LOCAL DEVELOPMENT & EXPERIMENTS
# ============================================================================

environment: development
debug: true
testing_mode: false

server:
  host: "0.0.0.0"
  port: 8000
  reload: true
  workers: 1
  log_level: "info"

cors:
  allowed_origins:
    - "http://localhost:3000"
    - "http://localhost:8000"
  allow_credentials: true
  allow_methods: ["*"]
  allow_headers: ["*"]

storage: {}  # Uses defaults

models:
  use_gpu: false
  use_fp16: false
  batch_size: 4
  cache_size: 100
  lazy_loading: true
  model_timeout: 300

consensus:
  min_validators: 10
  max_validators: 20
  devils_advocate_ratio: 0.1
  consensus_threshold: 0.7
  voting_rounds: 5
  timeout: 60

credibility:
  deepfake_threshold: 0.5
  high_confidence_threshold: 0.8
  low_confidence_threshold: 0.4
  num_augmentations: 5
  min_consistency_score: 0.6

counter_evidence:
  presumption_of_innocence_weight: 1.3
  identity_verification_bonus: 1.2
  prior_credibility: 0.5
  require_identity_verification: false

coordination:
  content_similarity_threshold: 0.7
  style_similarity_threshold: 0.65
  temporal_similarity_threshold: 0.8
  min_cluster_size: 3
  anomaly_contamination: 0.1

rate_limit:
  enabled: true
  max_submissions_per_hour: 20
  max_submissions_per_day: 100
  max_requests_per_minute: 60
  cleanup_interval: 300

security:
  encryption_enabled: true
  hash_chain_enabled: true
  exif_stripping_enabled: true
  rate_limiting_enabled: true
  csrf_enabled: false

logging:
  level: "INFO"
  console_logging: true
  file_logging: true
  json_logging: false
  max_file_size_mb: 10
  backup_count: 5

metrics:
  enabled: true
  collection_interval: 30
  export_prometheus: false

evaluation:
  enabled: true
  output_dir: "evaluation/results"
